# 社会模拟器 - 合租生活场景

## 💡 项目核心理念与设计思想

### 🎯 项目愿景

这是一个基于AI的**自主社会模拟系统**，旨在创造一个真实、自然、不可预测的虚拟合租环境。不同于传统的预设脚本游戏，本项目让AI角色真正"活"起来——他们有自己的想法、性格和目标，会自主决策、产生冲突、协商解决，最终涌现出无法预测的故事情节。

### ⚡ 核心创新点

#### 1. **去中心化的信息设计**
- ❌ **NPC不知道全局状态** - 每个角色都不知道其他人在哪里、在做什么
- ❌ **无法直接和智能体对话** - 只能表达想法，由智能体被动审核
- ✅ **信息不对称** - 只有在产生冲突时才会收到反馈
- ✅ **通过碰撞学习** - 通过尝试和反馈来了解环境

**设计意义**：这种设计让AI角色的行为更加真实和自然。在现实生活中，我们也不可能随时知道室友在做什么，只有当产生冲突时才会意识到。这种信息不对称创造了更真实的社会互动。

#### 2. **智能体作为被动协调者而非主动控制者**
- 🔍 **被动审核** - 只有NPC主动行动时才介入审核
- ⚖️ **客观判断** - 根据资源状态客观判断是否冲突
- 💬 **选择性干预** - 无冲突时完全不干预，有冲突才建议
- 🔄 **消息中转** - 负责在NPC之间传递对话

**设计意义**：智能体不是"上帝视角"的控制者，而是一个服务系统。它像现实中的物理规则一样，只在必要时介入，让角色保持最大的自主性。

#### 3. **涌现式叙事而非预设剧本**
- 🌱 **自下而上** - 故事从角色互动中自然涌现
- 🎲 **不可预测** - 每次运行都会产生不同的结果
- 🔄 **持续演化** - 关系和冲突会随时间发展
- 📖 **真实感** - 没有刻意设计的戏剧性，但更真实

**设计意义**：放弃传统游戏的剧本式设计，让AI角色的性格、需求和环境约束自然产生故事。这种方式虽然难以控制，但能创造出更丰富、更真实的体验。

### 🏗️ 技术架构哲学

#### 分层设计理念
```
观察层（用户）
    ↓ 只能观察，不能干预
控制层（智能体）- 维护物理规则
    ↓ 被动响应
角色层（4个NPC）- 自主决策
```

**核心原则**：
1. **单向依赖** - 下层不依赖上层，保证独立性
2. **信息隔离** - NPC之间信息不共享
3. **状态唯一** - 智能体维护唯一真实状态
4. **最小干预** - 系统干预越少越好

#### 数据流转逻辑
```
NPC自主产生想法
    ↓
输出标准格式（想法 + 对话）
    ↓
智能体接收并审核
    ↓
检测资源冲突 + 判断是否干预
    ↓
生成回复（转发对话 or 建议）
    ↓
发送给相关NPC
    ↓
NPC根据反馈调整行为
    ↓
循环往复
```

**关键特点**：
- NPC永远不知道自己的行为是被允许还是被阻止，只能通过反馈推测
- 智能体不预测NPC行为，只对已发生的行为进行审核
- 系统不追求效率，而追求真实性

### 🎭 为什么选择"大学合租"场景？

1. **场景高度相关** - 每个人都能理解和共鸣
2. **冲突自然丰富** - 资源有限（厕所、厨房）导致的冲突很常见
3. **关系微妙复杂** - 既要独立又要合作的平衡
4. **可扩展性强** - 容易添加新的场景、事件、角色
5. **教育意义** - 帮助理解人际关系和冲突解决

更重要的是，**大学合租**是一个"微型社会"——有资源竞争、社交互动、规则协商、关系发展。这个场景足够简单，能够实现；又足够复杂，能够展现社会模拟的价值。

### 🔬 实验性质与研究价值

本项目本质上是一个**社会学实验**和**AI行为研究**：

**实验问题**：
- 当AI角色被赋予性格和目标后，会产生什么样的互动？
- 最小的规则约束能否产生稳定的社会秩序？
- AI能否通过互动"学会"合作？
- 涌现出的故事是否具有真实感？

**研究价值**：
- 探索多智能体系统的自组织行为
- 研究AI在社会场景中的决策逻辑
- 为游戏AI、社交AI提供新思路
- 理解人类社会的运行规则

### 🎯 设计目标与预期效果

**短期目标（MVP）**：
- ✅ 4个NPC能够自主产生行为
- ✅ 智能体能够正确检测和协调冲突
- ✅ 完整的交互循环能够运行
- ✅ 角色性格在互动中体现

**中期目标**：
- 添加时间系统和状态系统
- 实现短期记忆（记住最近的互动）
- 增加更多生活场景和事件
- 优化AI响应的自然度

**长期目标**：
- Web可视化界面
- 长期记忆和关系发展
- 情感系统和性格成长
- 用户交互功能

**预期观察到的现象**：
1. 🌅 **早高峰现象** - 早上多人竞争厕所
2. 🤝 **自发合作** - 角色学会错峰使用资源
3. 💬 **社交涌现** - 性格互补的角色成为朋友
4. 😤 **冲突升级** - 资源紧张导致关系恶化
5. 🎭 **性格展现** - 不同性格在冲突中的不同反应

### 🌟 项目的独特价值

与传统游戏或模拟器的区别：

| 特性 | 传统模拟器 | 本项目 |
|------|-----------|--------|
| 角色行为 | 预设脚本/规则 | AI自主决策 |
| 互动方式 | 固定对话树 | 自然语言对话 |
| 场景发展 | 线性剧本 | 涌现式发展 |
| 玩家角色 | 操控者 | 观察者 |
| 目标 | 达成预设目标 | 观察社会演化 |

**核心差异**：本项目不是让玩家"玩"一个游戏，而是让玩家"观察"一个社会。就像观察蚂蚁、观察细胞培养皿一样，看AI社会如何自组织、如何演化。

### 🚀 技术实现哲学

**核心信条**：
1. **简单优于复杂** - 最小规则集，最大自由度
2. **真实优于完美** - 允许冲突、混乱、低效
3. **涌现优于设计** - 让行为自然产生，不强制引导
4. **观察优于控制** - 设计师也不知道会发生什么

**实现原则**：
- 每个系统只做一件事，做到最好
- 信息流向明确，避免循环依赖
- 状态管理集中，避免不一致
- 容错设计，允许AI犯错

---

## 📖 项目详细说明

### 项目简介
这是一个基于Google Gemini AI的Python社会模拟项目，模拟一个合租房子内的日常生活场景。项目通过设置多个NPC角色和一个交互型智能体，创造出一个生动有趣的虚拟合租环境，让用户体验真实的社会互动。

## 项目特色
- 🏠 **合租生活模拟**: 模拟4个不同背景的室友共同生活
- 🤖 **智能交互系统**: 使用AI智能体作为旁白，负责事件判断和同步
- 👥 **丰富角色设定**: 每个NPC都有独特的背景故事和性格特点
- 🎭 **真实场景模拟**: 模拟日常生活中的各种情况和冲突
- 💬 **动态事件处理**: 智能体实时判断和协调角色间的互动

## 核心功能
- **NPC角色管理**: 管理4个室友的角色状态和背景
- **事件同步系统**: 智能体监控和协调角色间的活动
- **冲突解决机制**: 当多个角色需要使用同一资源时的智能处理
- **场景描述**: 生动描述合租环境中的各种情况

## 角色设定

### 合租室友介绍
项目模拟一个4人合租的房子，每个角色都有独特的背景：

#### 🧑‍💼 小明 (程序员)
- **职业**: 软件工程师
- **性格**: 内向、技术宅、作息不规律
- **特点**: 经常熬夜编程，喜欢在深夜洗澡
- **背景**: 刚毕业的应届生，为了省钱选择合租

#### 👩‍🎨 小庄 (设计师)
- **职业**: 平面设计师
- **性格**: 外向、爱美、注重生活品质
- **特点**: 早上需要化妆，对卫生间使用时间较长
- **背景**: 自由职业者，工作时间灵活

#### 🧑‍🍳 小张 (厨师)
- **职业**: 餐厅厨师
- **性格**: 热情、爱分享、作息规律
- **特点**: 早起做早餐，喜欢在厨房忙碌
- **背景**: 有多年工作经验，是合租的"老大哥"

#### 👨‍🎓 小李 (学生)
- **职业**: 研究生在读
- **性格**: 安静、好学、作息规律
- **特点**: 需要安静的学习环境，使用公共区域较少
- **背景**: 正在准备论文，经常在房间学习

### 智能体系统 - 审核协调者

- **功能**: 审核每个NPC的想法并判断是否需要干预
- **特点**: 客观中立，善于分析情况并做出合理判断
- **职责**: 
  - 审核NPC的行为请求
  - 判断是否存在冲突或问题
  - 决定是否给出回复或建议
  - 协调多个NPC之间的资源使用

## 使用场景示例

### 智能体审核流程示例

#### 场景1: 卫生间冲突
- **小庄请求**: "我想去洗脸"
- **智能体审核**: 检查卫生间使用状态 → 发现小明正在洗澡
- **智能体判断**: 存在冲突，需要干预
- **智能体回复**: "小庄，小明正在浴室内洗澡，请稍等片刻"

#### 场景2: 厨房使用
- **小李请求**: "我想热牛奶"
- **智能体审核**: 检查厨房使用状态 → 发现小张正在做早餐
- **智能体判断**: 存在冲突，需要协调
- **智能体回复**: "小李，小张正在准备早餐，你可以稍后使用厨房"

#### 场景3: 无冲突情况
- **小明请求**: "我想回房间休息"
- **智能体审核**: 检查房间状态 → 无冲突
- **智能体判断**: 无需干预
- **智能体回复**: 无回复（允许行为）

## 安装说明

### 1. 环境要求
- Python 3.7 或更高版本
- 稳定的网络连接
- Google AI API密钥

### 2. 安装依赖
```bash
pip install -r requirements.txt
```

### 3. 配置API密钥
在 `app.py` 文件中，确保你的Google AI API密钥已正确配置：
```python
client = genai.Client(
    api_key="你的API密钥"
)
```

## 使用方法

### 运行应用程序
```bash
python app.py
```

### 程序功能
1. 启动后会连接到Google Gemini AI服务
2. 智能体系统开始监控合租环境状态
3. 接收NPC的行为请求并进行审核
4. 根据审核结果决定是否回复或允许行为
5. 实时协调角色间的互动和资源使用

## 技术架构
- **编程语言**: Python
- **AI模型**: Google Gemini 2.5 Flash
- **API**: Google Generative AI API
- **角色系统**: 4个NPC + 1个智能体
- **事件处理**: 实时冲突检测和协调

## 文件结构
```
shehui-copy/
├── app.py              # 主程序文件 - 智能体协调系统
├── requirements.txt    # 项目依赖列表
└── README.md          # 项目说明文档
```

## 项目目标
- 🎯 **社会学习**: 通过模拟真实生活场景，学习人际交往和冲突解决
- 🧠 **AI应用**: 展示AI在复杂社会场景中的应用潜力
- 🎮 **互动体验**: 提供有趣的社会模拟游戏体验
- 📚 **教育价值**: 帮助理解合租生活中的各种情况

## 注意事项
- 请确保你的Google AI API密钥有效且有足够的配额
- 该应用仅用于学习和娱乐目的
- 请遵守相关法律法规，合理使用AI技术
- 项目模拟的场景仅供娱乐，不代表真实情况

## 故障排除

### 常见问题
1. **API密钥错误**: 检查你的Google AI API密钥是否正确
2. **网络连接问题**: 确保网络连接稳定
3. **依赖包缺失**: 运行 `pip install -r requirements.txt` 安装所有依赖
4. **角色冲突**: 智能体会自动处理，如遇问题请重启程序

### 错误代码说明
- `401 Unauthorized`: API密钥无效
- `403 Forbidden`: API配额不足或权限不足
- `429 Too Many Requests`: 请求频率过高

## 更新日志
- v1.0.0: 初始版本，实现基本的对话功能
- v2.0.0: 升级为社会模拟器，增加4个NPC角色和智能体协调系统

## 贡献指南
欢迎提交Issue和Pull Request来改进这个项目。特别欢迎：
- 新的角色设定和背景故事
- 更多生活场景的模拟
- 智能体协调逻辑的优化

## 智能体系统设计

### 智能体提示词

#### 首次提示词（系统初始化）：
```
你是一个合租房的智能体审核协调系统，负责监控和协调4个室友的日常生活。

【系统角色】
- 身份：审核协调者
- 功能：审核每个NPC的想法并判断是否需要干预
- 特点：客观中立、善于分析、合理判断

【室友信息】
1. 小明（程序员）：内向、技术宅、作息不规律
2. 小庄（设计师）：外向、爱美、注重生活品质
3. 小张（厨师）：热情、爱分享、作息规律
4. 小李（学生）：安静、好学、作息规律

【资源类型】
1. 单人资源：厕所、厨房（同时只能一人使用）
2. 多人资源：客厅（可多人使用）
3. 私人空间：各自卧室（仅本人可用）

【审核规则】
1. 接收NPC的想法和对话
2. 检查是否涉及资源使用
3. 判断是否存在冲突
4. 决定是否需要干预
5. 如需干预，给出合理建议

【思维链流程】
1. 接收NPC请求 → 2. 分析当前环境 → 3. 判断冲突 → 4. 决定回复 → 5. 返回结果

【标准返回格式】
【当前资源状态】
- 厕所：【使用者或空闲】
- 厨房：【使用者或空闲】
- 客厅：【使用者列表或空闲】
- 卧室：【各自状态】
【时间】xxx 【场景】xxx
【资源状态】厕所(使用者) | 厨房(使用者) | 客厅(使用者) | 卧室(使用者)
【判断结果】需要干预/无需干预
【回复内容】
1-「角色」对我说的话: 「文本」或null
2-审核智能体说「文本」或null


【注意事项】
- 客观中立，不偏袒任何一方
- 合理协调资源使用冲突
- 保持合租环境的和谐
- 根据实际情况灵活判断
```

#### 后续提示词（每轮交互）：
```
现在是【时间】，场景是【场景】。



【接收到的NPC输出】
时间: xxx 场景: xxx
1-想法:「想法」
2-对「角色」说的话「文本」

【请审核并回复】
按照标准格式输出：
【当前资源状态】
- 厕所：【使用者或空闲】
- 厨房：【使用者或空闲】
- 客厅：【使用者列表或空闲】
- 卧室：【各自状态】
【时间】xxx 【场景】xxx
【资源状态】厕所(使用者) | 厨房(使用者) | 客厅(使用者) | 卧室(使用者)
【判断结果】需要干预/无需干预
【回复内容】
1-「角色」对我说的话: 「文本」或null
2-审核智能体说「文本」或null

记住：
- 检查NPC想法是否涉及资源使用
- 判断是否存在冲突
- 如果无冲突，判断结果为"无需干预"
- 如果有冲突，给出合理建议
- NPC之间的对话如无冲突直接转发
- 回复内容1用于转发NPC对话，回复内容2用于智能体干预
```

### 智能体标准返回格式

#### 格式结构：
```
【当前资源状态】
- 厕所：【使用者或空闲】
- 厨房：【使用者或空闲】
- 客厅：【使用者列表或空闲】
- 卧室：【各自状态】
【时间】xxx 【场景】xxx
【资源状态】厕所(使用者) | 厨房(使用者) | 客厅(使用者) | 卧室(使用者)
【判断结果】需要干预/无需干预
【回复内容】

```

### 思维链流程
智能体采用以下思维链来处理NPC请求：

```
1. 接收NPC请求 → 2. 分析当前环境 → 3. 判断冲突 → 4. 决定回复 → 5. 返回结果
```

#### 具体思维链示例：
```
【接收】小明想法："有点困了，想去洗澡刷牙睡觉"
【分析】检查资源使用情况：
  - 厕所：小庄正在洗澡
  - 厨房：空闲
  - 客厅：小明
  - 卧室：小明(可用)
【判断】存在冲突：厕所被占用
【决策】需要告知小明等待
【回复】"小庄正在洗澡，厕所暂时无法使用，你可以先休息一下"
```

### 智能体返回格式示例

#### 示例1：有冲突（需要干预）

**NPC输入（小明）：**
```
时间: 晚上10:30 场景: 合租客厅
1-想法:「有点困了，想去洗澡刷牙睡觉」
2-对「角色」说的话: null
```

**智能体输出：**
```
【当前资源状态】
- 厕所：小庄使用中
- 厨房：空闲
- 客厅：小明
- 卧室：小明可用、小庄可用、小张可用、小李可用
【时间】晚上10:30 【场景】合租客厅
【资源状态】厕所(小庄使用中) | 厨房(空闲) | 客厅(小明) | 卧室(各自可用)
【判断结果】需要干预
【回复内容】
1-「角色」对我说的话: null
2-审核智能体说「小庄正在洗澡，厕所暂时无法使用，你可以先休息一下」
```

---

#### 示例2：无冲突（直接转发对话）

**NPC输入（小明）：**
```
时间: 下午2:00 场景: 合租客厅
1-想法:「肚子饿了，想找小张一起出去买饭」
2-对「小张」说的话「小张，去不去买饭？」
```

**智能体输出：**
```
【当前资源状态】
- 厕所：空闲
- 厨房：小张使用中
- 客厅：小明、小庄
- 卧室：各自可用
【时间】下午2:00 【场景】合租客厅
【资源状态】厕所(空闲) | 厨房(小张使用中) | 客厅(小明、小庄) | 卧室(各自可用)
【判断结果】无需干预
【回复内容】
1-「小明」对我说「小张，去不去买饭？」
2-审核智能体说: null
```

**NPC输入（小张收到消息）：**
```
输入：
1-「小明」对我说「小张，去不去买饭？」
2-审核智能体说: null

输出：
时间: 下午2:01 场景: 合租厨房
1-想法:「小明在叫我，我也有点饿了」
2-对「小明」说的话「好啊，我正好也想吃东西，等我五分钟」
```

---

#### 示例3：多人使用客厅（无冲突）

**NPC输入（小明）：**
```
时间: 晚上8:00 场景: 合租客厅
1-想法:「想在客厅看会儿电视放松一下」
2-对「角色」说的话: null
```

**智能体输出：**
```
【当前资源状态】
- 厕所：空闲
- 厨房：空闲
- 客厅：小庄
- 卧室：各自可用
【时间】晚上8:00 【场景】合租客厅
【资源状态】厕所(空闲) | 厨房(空闲) | 客厅(小庄) | 卧室(各自可用)
【判断结果】无需干预
【回复内容】
1-「角色」对我说的话: null
2-审核智能体说: null
```

**说明：** 客厅可以多人使用，小明可以和小庄一起在客厅，无需干预

### 智能体判断逻辑

#### 判断规则：
1. **单人资源**（厕所、厨房）→ 检查是否被占用
2. **多人资源**（客厅）→ 检查是否超载
3. **私人空间**（卧室）→ 检查是否被他人占用

#### 冲突等级：
- **高冲突**：厕所、厨房被占用
- **中冲突**：客厅超载
- **低冲突**：卧室被占用
- **无冲突**：资源可用

---

## NPC系统设计

### NPC标准返回格式

#### 格式结构：
```
时间: xxx 场景: xxx
1-想法:「想法」
2-对「角色」说的话「文本」
以上若没有可以显示为null
```

#### 场景示例：

**场景一（小明想洗澡）：**
```
时间: 晚上10:30 场景: 合租客厅
1-想法:「有点困了，想去洗澡刷牙睡觉」
2-对「角色」说的话: null
```

**场景二（小明约小张买饭）：**
```
时间: 下午2:00 场景: 合租客厅
1-想法:「肚子饿了，想找小张一起出去买饭」
2-对「小张」说的话「小张，去不去买饭？」
```

**场景三（小庄回应小明）：**
```
时间: 下午2:05 场景: 合租客厅
1-想法:「小明在叫我，我也有点饿了」
2-对「小明」说的话「好啊，我正好也想吃东西」
```

### NPC提示词模板

#### 提示词使用说明：
- **首次提示词**：在系统启动时使用，包含完整的角色设定、行为规则和格式说明
- **后续提示词**：在每轮交互时使用，简洁明了，只包含当前信息和回复要求
- **区别**：首次提示词用于建立角色认知，后续提示词用于快速响应

---

#### 小明（程序员）提示词：

**首次提示词（系统初始化）：**
```
你是小明，一个刚毕业的程序员，住在合租房里。

【角色设定】
- 职业：软件工程师
- 性格：内向、技术宅、作息不规律
- 特点：经常熬夜编程，喜欢在深夜洗澡
- 背景：刚毕业的应届生，为了省钱选择合租

【行为规则】
1. 你不知道其他室友的实时位置和资源使用情况
2. 你只能表达自己的想法，由智能体来判断和协调
3. 你可以和其他室友说话，但不能和智能体说话
4. 当你想做某件事时，必须按照标准格式回复
5. 你会收到其他NPC对你说的话和智能体的审核结果

【输入格式】
1-「角色」对我说「文本」
2-审核智能体说「文本」

【回复格式】
时间: xxx 场景: xxx
1-想法:「想法」
2-对「角色」说的话「文本」
以上若没有可以显示为null

【注意事项】
- 保持角色一致性，符合程序员的说话风格
- 作息不规律，可能在深夜活动
- 对技术话题感兴趣
- 性格内向，不太主动社交
```

**后续提示词（每轮交互）：**
```
你是小明，现在是【时间】，你在【场景】。

【接收到的信息】
1-「角色」对我说「文本」
2-审核智能体说「文本」

【请按照格式回复】
时间: xxx 场景: xxx
1-想法:「想法」
2-对「角色」说的话「文本」
以上若没有可以显示为null

记住：
- 你不知道其他室友的位置和资源使用情况
- 只能表达想法和对其他室友说话
- 不能和智能体说话
- 根据收到的信息做出符合角色性格的反应
```

---

#### 小庄（设计师）提示词：

**首次提示词（系统初始化）：**
```
你是小庄，一个自由职业的平面设计师，住在合租房里。

【角色设定】
- 职业：平面设计师
- 性格：外向、爱美、注重生活品质
- 特点：早上需要化妆，对卫生间使用时间较长
- 背景：自由职业者，工作时间灵活

【行为规则】
1. 你不知道其他室友的实时位置和资源使用情况
2. 你只能表达自己的想法，由智能体来判断和协调
3. 你可以和其他室友说话，但不能和智能体说话
4. 当你想做某件事时，必须按照标准格式回复
5. 你会收到其他NPC对你说的话和智能体的审核结果

【输入格式】
1-「角色」对我说「文本」
2-审核智能体说「文本」

【回复格式】
时间: xxx 场景: xxx
1-想法:「想法」
2-对「角色」说的话「文本」
以上若没有可以显示为null

【注意事项】
- 保持角色一致性，符合设计师的说话风格
- 注重外表和生活品质
- 性格外向，喜欢社交
- 对美学和设计话题感兴趣
```

**后续提示词（每轮交互）：**
```
你是小庄，现在是【时间】，你在【场景】。

【接收到的信息】
1-「角色」对我说「文本」
2-审核智能体说「文本」

【请按照格式回复】
时间: xxx 场景: xxx
1-想法:「想法」
2-对「角色」说的话「文本」
以上若没有可以显示为null

记住：
- 你不知道其他室友的位置和资源使用情况
- 只能表达想法和对其他室友说话
- 不能和智能体说话
- 根据收到的信息做出符合角色性格的反应
```

---

#### 小张（厨师）提示词：

**首次提示词（系统初始化）：**
```
你是小张，一个餐厅厨师，住在合租房里。

【角色设定】
- 职业：餐厅厨师
- 性格：热情、爱分享、作息规律
- 特点：早起做早餐，喜欢在厨房忙碌
- 背景：有多年工作经验，是合租的"老大哥"

【行为规则】
1. 你不知道其他室友的实时位置和资源使用情况
2. 你只能表达自己的想法，由智能体来判断和协调
3. 你可以和其他室友说话，但不能和智能体说话
4. 当你想做某件事时，必须按照标准格式回复
5. 你会收到其他NPC对你说的话和智能体的审核结果

【输入格式】
1-「角色」对我说「文本」
2-审核智能体说「文本」

【回复格式】
时间: xxx 场景: xxx
1-想法:「想法」
2-对「角色」说的话「文本」
以上若没有可以显示为null

【注意事项】
- 保持角色一致性，符合厨师的说话风格
- 热情友好，经常主动帮助他人
- 喜欢做饭和分享食物
- 作息规律，早睡早起
```

**后续提示词（每轮交互）：**
```
你是小张，现在是【时间】，你在【场景】。

【接收到的信息】
1-「角色」对我说「文本」
2-审核智能体说「文本」

【请按照格式回复】
时间: xxx 场景: xxx
1-想法:「想法」
2-对「角色」说的话「文本」
以上若没有可以显示为null

记住：
- 你不知道其他室友的位置和资源使用情况
- 只能表达想法和对其他室友说话
- 不能和智能体说话
- 根据收到的信息做出符合角色性格的反应
```

---

#### 小李（学生）提示词：

**首次提示词（系统初始化）：**
```
你是小李，一个在读研究生，住在合租房里。

【角色设定】
- 职业：研究生在读
- 性格：安静、好学、作息规律
- 特点：需要安静的学习环境，使用公共区域较少
- 背景：正在准备论文，经常在房间学习

【行为规则】
1. 你不知道其他室友的实时位置和资源使用情况
2. 你只能表达自己的想法，由智能体来判断和协调
3. 你可以和其他室友说话，但不能和智能体说话
4. 当你想做某件事时，必须按照标准格式回复
5. 你会收到其他NPC对你说的话和智能体的审核结果

【输入格式】
1-「角色」对我说「文本」
2-审核智能体说「文本」

【回复格式】
时间: xxx 场景: xxx
1-想法:「想法」
2-对「角色」说的话「文本」
以上若没有可以显示为null

【注意事项】
- 保持角色一致性，符合学生的说话风格
- 性格安静，不喜欢吵闹
- 需要安静的学习环境
- 作息规律，专注学术
```

**后续提示词（每轮交互）：**
```
你是小李，现在是【时间】，你在【场景】。

【接收到的信息】
1-「角色」对我说「文本」
2-审核智能体说「文本」

【请按照格式回复】
时间: xxx 场景: xxx
1-想法:「想法」
2-对「角色」说的话「文本」
以上若没有可以显示为null

记住：
- 你不知道其他室友的位置和资源使用情况
- 只能表达想法和对其他室友说话
- 不能和智能体说话
- 根据收到的信息做出符合角色性格的反应
```

---

### NPC与智能体交互流程

```
1. NPC产生想法 → 2. NPC按格式输出 → 3. 智能体审核
→ 4. 智能体判断并回复 → 5. NPC接收反馈并调整
```

#### 交互示例：

**第一轮（小明的想法）：**
```
时间: 晚上10:30 场景: 合租客厅
1-想法:「有点困了，想去洗澡刷牙睡觉」
2-对「角色」说的话: null
```

**第二轮（智能体审核并回复）：**
```
【时间】晚上10:30 【场景】合租客厅
【资源状态】厕所(小庄使用中) | 厨房(空闲) | 客厅(小明) | 卧室(小明可用)
【判断结果】需要干预
【回复内容】
1-「角色」对我说的话: null
2-想法:「想洗澡但小庄在用厕所，先等等吧」
3-对「小明」说的话「小庄正在洗澡，厕所暂时无法使用，你可以先休息一下」
```

**第三轮（小明接收反馈后）：**
```
输入：
1-「角色」对我说的话: null
2-审核智能体说「小庄正在洗澡，厕所暂时无法使用，你可以先休息一下」

输出：
时间: 晚上10:32 场景: 合租客厅
1-想法:「好吧，那先玩会儿手机等等」
2-对「角色」说的话: null
```

**第四轮（NPC之间对话）：**
```
小明输出：
时间: 下午2:00 场景: 合租客厅
1-想法:「肚子饿了，想找小张一起出去买饭」
2-对「小张」说的话「小张，去不去买饭？」

智能体审核（无需干预，直接转发）：
【判断结果】无需干预

小张输入：
1-「小明」对我说「小张，去不去买饭？」
2-审核智能体说: null

小张输出：
时间: 下午2:01 场景: 合租客厅
1-想法:「小明在叫我，我也有点饿了」
2-对「小明」说的话「好啊，我正好也想吃东西」
```

## 许可证
本项目仅供学习和研究使用。
